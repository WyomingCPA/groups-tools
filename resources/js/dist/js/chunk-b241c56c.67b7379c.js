(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b241c56c"],{b0c0:function(t,e,o){var s=o("83ab"),i=o("9bf2").f,n=Function.prototype,r=n.toString,a=/^\s*function ([^ (]*)/,c="name";!s||c in n||i(n,c,{configurable:!0,get:function(){try{return r.call(this).match(a)[1]}catch(t){return""}}})},ee73:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"tables"},[t._m(0),o("div",{staticClass:"row"},[o("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("h4",{staticClass:"card-title"}),o("b-table",{attrs:{responsive:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[o("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(o){return t.setSubscribers(e.item,e.index,o.target)}}},[t._v(" Задать подписчиков ")]),o("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(o){return t.deleteGroup(e.item,e.index,o.target)}}},[t._v(" Удалить группу ")])]}}])},[o("template",{slot:"bottom-row"},[o("td",[t._v("Всего")]),o("td"),o("td",[t._v(t._s(t.totalSubcribbers))]),o("td")])],2),o("b-modal",{ref:"my-modal",attrs:{id:t.infoModal.id,title:t.infoModal.title},on:{hide:t.resetInfoModal,ok:t.handleOk}},[o("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[o("b-form-group",{attrs:{label:"Кол-во подписчиков","label-for":"name-input","invalid-feedback":"Name is required"}},[o("b-form-input",{attrs:{id:"name-input",required:""},model:{value:t.countSubscriber,callback:function(e){t.countSubscriber=e},expression:"countSubscriber"}})],1)],1)])],1)])])])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-header"},[o("h3",{staticClass:"page-title"},[t._v("Bootstrap Table")]),o("nav",{attrs:{"aria-label":"breadcrumb"}},[o("ol",{staticClass:"breadcrumb"},[o("li",{staticClass:"breadcrumb-item"},[o("a",{attrs:{href:"javascript:void(0);"}},[t._v("Table")])]),o("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Все группы")])])])])}],n=(o("b0c0"),o("d3b7"),o("159b"),o("96cf"),o("bc3a")),r=o.n(n),a={name:"group-all",components:{},data:function(){return{countSubscriber:0,idGroup:"",items:Array,infoModal:{id:"info-modal",title:"",content:""},fields:[{key:"name",label:"Название группы",sortable:!0},{key:"subscribers.count_subscriber",label:"Количество участников",sortable:!0},{key:"difference_point",label:"Прирост",sortable:!0},{key:"subscribers.updated_at",label:"Последнее обновление",sortable:!0},{key:"actions",label:"Actions"}]}},methods:{handleOk:function(t){t.preventDefault(),this.handleSubmit()},setSubscribers:function(t,e,o){this.infoModal.title=t.name,this.idGroup=t.id,this.$root.$emit("bv::show::modal",this.infoModal.id,o)},deleteGroup:function(t,e,o){var s=this;this.idGroup=t.id;var i=this;r.a.get("/sanctum/csrf-cookie").then((function(t){r.a.post("/api/group/delete",{id_group:i.idGroup}).then((function(t){t.status?(console.log("Вызвали алерт"),s.getGroups()):(console.log("Не работает"),console.log(t.status))})).catch((function(e){console.log(t),console.error(e)}))}))},getGroups:function(){var t=this;r.a.get("/api/group").then((function(e){t.items=e.data.groups,console.log(e.data.groups)})).catch((function(t){console.error(t)}))},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},handleSubmit:function(){var t,e=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:t=this,r.a.get("/sanctum/csrf-cookie").then((function(o){r.a.post("/api/group/set-subscriber",{count_subscriber:e.countSubscriber,id_group:t.idGroup}).then((function(t){t.status?(console.log("Вызвали алерт"),e.getGroups(),e.$refs["my-modal"].hide()):(console.log("Не работает"),console.log(t.status))})).catch((function(t){console.log(o),console.error(t)}))}));case 2:case"end":return o.stop()}}),null,this)}},mounted:function(){this.getGroups()},computed:{totalSubcribbers:function(){var t=0;return this.items.forEach((function(e,o){null!=e.subscribers&&(t+=e.subscribers["count_subscriber"])})),t}}},c=a,l=o("2877"),u=Object(l["a"])(c,s,i,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-b241c56c.67b7379c.js.map